var tableApp = angular.module('tableApp');

tableApp.controller('AddingFormController', 
    function ($scope){
        $scope.addItem = function(e){
            var tbody = angular.element(document.getElementsByTagName("tbody"));

            var row = angular.element("<tr>");
            row.addClass("body_row");

            var name = angular.element("<td>");
            name.addClass("element");
            name.text(document.querySelector(".addAge").value);

            var surname = angular.element("<td>");
            surname.text(document.querySelector(".addAge").value);
            surname.addClass("element");

            var age = angular.element("<td>");
            age.addClass("element");
            age.text(document.querySelector(".addAge").value);

            var mark = angular.element("<td>");
            mark.addClass("mark");
            mark.text(document.querySelector(".addAge").value);

            var buttons = angular.element("<td>");
            buttons.addClass("edit-remove-buttons");

            var buttonDelete = angular.element("<button>");
            buttonDelete.addClass("btn-default");
            buttonDelete.attr("aria-label", "Delete");
            buttonDelete.on("click", function(e){
                var removeButtonElement = e.target;
                row = removeButtonElement.closest("tr");
                row.parentElement.removeChild(row);
            });

            var svg = angular.element("<svg>");
            svg.addClass("deleteBtn-icon");
            svg.attr("aria-hidden", "true");
            svg.attr("width", 32);
            svg.attr("height", 32);
            svg.attr("viewBox", "0 0 20 20");
            var useSvg = angular.element("<use>");
            useSvg.attr("xlink:href", "/img/delete.svg#Capa_1");

            svg.append(useSvg);
            buttonDelete.append(svg);
            buttons.append(buttonDelete);
            row.append(surname);
            row.append(name);
            row.append(age);
            row.append(mark);
            row.append(buttons);
            tbody.append(row);
        }
    })